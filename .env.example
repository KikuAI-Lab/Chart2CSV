# Chart2CSV Environment Configuration
# Copy this file to .env and fill in your values
# Never commit .env files to version control!

# ============================================
# API Keys
# ============================================

# Mistral AI API Key (required for LLM extraction and Mistral OCR)
# Get your API key at: https://console.mistral.ai/
# Used for: LLM-based chart extraction (default mode)
MISTRAL_API_KEY=your_mistral_api_key_here


# ============================================
# CORS Configuration (Production)
# ============================================

# Comma-separated list of allowed origins for CORS
# Example: ALLOWED_ORIGINS=https://example.com,https://app.example.com
# Leave empty to use defaults:
#   - https://kiku-jw.github.io
#   - https://chart2csv.kikuai.dev
#   - http://localhost:3000
ALLOWED_ORIGINS=


# ============================================
# Application Settings
# ============================================

# Environment: development | staging | production
# Affects logging level and error detail exposure
ENV=production

# API Host and Port (for local development)
# Production deployments typically use reverse proxy
API_HOST=0.0.0.0
API_PORT=8000

# Log Level: DEBUG | INFO | WARNING | ERROR | CRITICAL
LOG_LEVEL=INFO


# ============================================
# Rate Limiting
# ============================================

# Maximum requests per minute per IP
# Default: 20
RATE_LIMIT_PER_MINUTE=20


# ============================================
# File Upload Limits
# ============================================

# Maximum file size in MB
# Default: 10
MAX_FILE_SIZE_MB=10

# Maximum image dimensions (width or height in pixels)
# Default: 10000
MAX_IMAGE_DIMENSION=10000


# ============================================
# OCR Configuration
# ============================================

# OCR Backend: tesseract | mistral | auto
# - tesseract: Use Tesseract OCR (offline, faster)
# - mistral: Use Mistral Vision API (online, more accurate)
# - auto: Try Tesseract first, fallback to Mistral if available
# Default: auto
OCR_BACKEND=auto

# Tesseract executable path (optional, auto-detected if in PATH)
# TESSERACT_CMD=/usr/bin/tesseract


# ============================================
# Extraction Defaults
# ============================================

# Default extraction mode: llm | cv | auto
# - llm: Use LLM vision (Pixtral) - fastest, most accurate
# - cv: Use computer vision pipeline - works offline
# - auto: Try LLM first, fall back to CV
# Default: llm
DEFAULT_EXTRACTION_MODE=llm

# Enable overlay image generation
# Helps debug extraction quality
# Default: false (for performance)
GENERATE_OVERLAY=false


# ============================================
# Cache Configuration
# ============================================

# Enable OCR result caching
# Speeds up repeated extractions of same image
# Default: true
ENABLE_OCR_CACHE=true

# Cache directory
# Default: .cache/ocr
CACHE_DIR=.cache/ocr

# Cache TTL in days (0 = no expiration)
# Default: 7
CACHE_TTL_DAYS=7


# ============================================
# Development / Debugging
# ============================================

# Enable debug mode (verbose logging, detailed errors)
# WARNING: Do not enable in production!
# Default: false
DEBUG=false

# Preserve temporary files for debugging
# Temp images normally deleted after processing
# Default: false
KEEP_TEMP_FILES=false

# Enable FastAPI auto-reload (development only)
# Default: false
RELOAD=false
